{"ast":null,"code":"import { csrfFetch } from \"./csrf\";\nconst PLAY_SONGS = \"/api/PLAYSONGS\";\nconst ADD_SONG = \"/api/ADDSONG\";\nconst EDIT_SONG = \"/api/EDITSONG\";\nconst DELETE_SONG = \"/api/DELETESONG\";\n\nconst playSongs = songs => ({\n  type: PLAY_SONGS,\n  songs\n});\n\nconst addSong = songFile => ({\n  type: ADD_SONG,\n  songFile\n});\n\nconst editSong = song => ({\n  type: EDIT_SONG,\n  song\n});\n\nconst deleteSong = song => ({\n  type: DELETE_SONG,\n  song\n});\n\nexport const playAllSongs = () => async dispatch => {\n  const response = await csrfFetch(\"/api/song/songs\", {\n    method: \"GET\"\n  });\n\n  if (response.ok) {\n    const songs = await response.json();\n    dispatch(playSongs(songs));\n    return songs;\n  }\n\n  ;\n};\nexport const addNewSong = songFile => async dispatch => {\n  const formData = new FormData();\n  formData.append('song', songFile.file);\n  formData.append('fileName', songFile.fileName);\n  formData.append('userId', songFile.userId);\n  const response = await csrfFetch(\"/api/song/songs\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    },\n    body: formData\n  });\n\n  if (response.ok) {\n    const newSong = await response.json();\n    dispatch(addSong(newSong));\n    dispatch(playAllSongs());\n    return true;\n  }\n\n  ;\n};\nexport const editCurrentSong = songEdit => async dispatch => {\n  songEdit = JSON.stringify(songEdit);\n  const response = await csrfFetch(\"/api/song/songs\", {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: songEdit\n  });\n\n  if (response.ok) {\n    const newSongEdit = await response.json();\n    dispatch(editSong(newSongEdit));\n    return true;\n  }\n\n  ;\n};\nexport const deleteCurrentSong = song => async dispatch => {\n  const response = await csrfFetch(`/api/song/songs/${song.id}`, {\n    method: \"DELETE\"\n  });\n\n  if (response.ok) {\n    dispatch(deleteSong(song));\n  }\n};\nconst initialState = {};\n\nconst songReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const newState = { ...state\n  };\n\n  switch (action.type) {\n    case PLAY_SONGS:\n      action.songs.forEach(song => newState[song.id] = song);\n      return newState;\n\n    case ADD_SONG:\n      return { ...state,\n        [action.songFile.id]: { ...action.songFile\n        }\n      };\n\n    case EDIT_SONG:\n      return { ...state,\n        [action.song.id]: { ...action.song\n        }\n      };\n\n    case DELETE_SONG:\n      delete newState[action.song.id];\n      return newState;\n\n    default:\n      return state;\n  }\n\n  ;\n};\n\nexport default songReducer; //todo define types\n// CRUD\n//CREATE\n// const CREATE_NOTEBOOK = 'notebooks/createNotebooks'\n// //READ\n// const GET_NOTEBOOK = 'notebooks/getNotebooks'\n// //UPDATE\n// const UPDATE_NOTEBOOK = 'notebooks/updateNotebooks'\n// //DELETE\n// const DELETE_NOTEBOOK = 'notebooks/deleteNotebooks'\n// import { csrfFetch } from \"./csrf\";\n// //todo action creators\n// const actionCreateNotebook =(notebook) => {\n//     return {\n//         type: CREATE_NOTEBOOK,\n//         notebook\n//     }\n// }\n// const actionGetNotebook =(notebooks) => {\n//     return {\n//         type: READ_NOTEBOOK,\n//         notebooks\n//     }\n// }\n// const actionUpdateNotebook =(notebook) => {\n//     return {\n//         type: UPDATE_NOTEBOOK,\n//         notebook\n//     }\n// }\n// const actionDeleteNotebook =(notebookId) => {\n//     return {\n//         type: DELETE_NOTEBOOK,\n//         notebookId\n//     }\n// }\n//todo thunks\n// in backend/routes/api/index.js prefixed with a path\n// export const thunkGetAllNotebooks = (user) => async (disptch) => {\n//     const response = await csrfFetch(`/api/notebooks/user/${userId}`)\n//     if (response.ok) {\n//         const data = await response.json();\n//         dispatch(actionGetNotebook(data));\n//         return response;\n//     } else {\n//         return await response.json()\n//     }\n// }\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n//todo reducer add it to the reducer in store/index.js and import\n//  const notebooks = (state = {}, action) => {\n//     let newState = {...state}\n//     switch (action.type) {\n//       case CREATE_NOTEBOOK:\n//         newState = Object.assign({}, state);\n//         newState.user = action.payload;\n//         return newState;\n//       case GET_NOTEBOOK:\n//         //normalization\n//        action.notebooks.forEach(notebook => {\n//             newState[notebook.id] = notebook\n//        })\n//         return newState;\n//       case UPDATE_NOTEBOOK:\n//         newState = Object.assign({}, state);\n//         newState.user = action.payload;\n//         return newState;\n//       case DELETE_NOTEBOOK:\n//         delete newState[action.notebookId]\n//         return newState;\n//       default:\n//         return state;\n//     }\n//   };\n//   export default notebooks\n// after full crud go back to the component and make it use redux\n// import { useDispatch, useSelector} from 'react-redux';\n// async function onDelete(notebookId) {\n//     console.log('BYE')\n// }\n// const dispatch = useDispatch;\n// const selectorNotebooks = useSelector(state => state.notebooks)\n// import thunkGetAllNotebooks from '../store/notebooks'\n// inside\n// useEffect(()=> {\n//     dispatch(thunkGetAllNotebooks(notebookId))\n// }, [dispatch])\n// useEffect(()=> {\n//     if (selectorNotebooks) {\n//     selectorNotebooks(Object.values(selectorNotebooks))\n// }\n// }, [selectorNotebooks])","map":{"version":3,"names":["csrfFetch","PLAY_SONGS","ADD_SONG","EDIT_SONG","DELETE_SONG","playSongs","songs","type","addSong","songFile","editSong","song","deleteSong","playAllSongs","dispatch","response","method","ok","json","addNewSong","formData","FormData","append","file","fileName","userId","headers","body","newSong","editCurrentSong","songEdit","JSON","stringify","newSongEdit","deleteCurrentSong","id","initialState","songReducer","state","action","newState","forEach"],"sources":["/home/jasontang/noiseNimbus/frontend/src/store/songFile.js"],"sourcesContent":["import { csrfFetch } from \"./csrf\";\n\nconst PLAY_SONGS = \"/api/PLAYSONGS\";\nconst ADD_SONG = \"/api/ADDSONG\";\nconst EDIT_SONG = \"/api/EDITSONG\";\nconst DELETE_SONG = \"/api/DELETESONG\";\n\nconst playSongs = (songs) => ({\n    type: PLAY_SONGS,\n    songs,\n  });\n\n  const addSong = (songFile) => ({\n    type: ADD_SONG,\n    songFile,\n  });\n\n  const editSong = (song) => ({\n    type: EDIT_SONG,\n    song,\n  });\n\n  const deleteSong = (song) => ({\n    type: DELETE_SONG,\n    song,\n  });\n\n\n  export const playAllSongs = () => async (dispatch) => {\n    const response = await csrfFetch(\"/api/song/songs\", {\n        method:\"GET\",\n    });\n\n    if (response.ok) {\n        const songs = await response.json();\n        dispatch(playSongs(songs));\n        return songs;\n    };\n  };\n\n\n  export const addNewSong = (songFile) => async (dispatch) => {\n    const formData = new FormData();\n    formData.append('song', songFile.file);\n    formData.append('fileName', songFile.fileName);\n    formData.append('userId', songFile.userId);\n\n    const response = await csrfFetch(\"/api/song/songs\", {\n        method:\"POST\",\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        },\n        body:formData\n    });\n\n    if (response.ok) {\n        const newSong = await response.json();\n        dispatch(addSong(newSong));\n        dispatch(playAllSongs());\n        return true;\n    };\n  };\n\n\n  export const editCurrentSong = (songEdit) => async (dispatch) => {\n    songEdit = JSON.stringify(songEdit);\n\n    const response = await csrfFetch(\"/api/song/songs\", {\n        method: \"PUT\",\n        headers: {\"Content-Type\": \"application/json\" },\n        body: songEdit,\n    });\n\n    if (response.ok) {\n        const newSongEdit = await response.json();\n        dispatch(editSong(newSongEdit));\n        return true;\n    };\n  };\n\n\n  export const deleteCurrentSong = (song) => async (dispatch) => {\n    const response = await csrfFetch(`/api/song/songs/${song.id}`, {\n        method: \"DELETE\"\n    });\n\n    if (response.ok) {\n        dispatch(deleteSong(song));\n    }\n  };\n\n\n  const initialState = {};\n\n  const songReducer = (state = initialState, action) => {\n    const newState = {...state};\n    switch (action.type) {\n        case PLAY_SONGS:\n            action.songs.forEach((song) => (newState[song.id]= song));\n            return newState;\n\n        case ADD_SONG:\n            return {...state, [action.songFile.id]: {...action.songFile}};\n\n        case EDIT_SONG:\n            return {...state, [action.song.id]: {...action.song}};\n\n        case DELETE_SONG:\n            delete newState[action.song.id];\n            return newState;\n\n        default:\n            return state;\n    };\n  };\n\n\n  export default songReducer;\n\n\n//todo define types\n// CRUD\n//CREATE\n// const CREATE_NOTEBOOK = 'notebooks/createNotebooks'\n// //READ\n// const GET_NOTEBOOK = 'notebooks/getNotebooks'\n// //UPDATE\n// const UPDATE_NOTEBOOK = 'notebooks/updateNotebooks'\n// //DELETE\n// const DELETE_NOTEBOOK = 'notebooks/deleteNotebooks'\n\n// import { csrfFetch } from \"./csrf\";\n\n// //todo action creators\n// const actionCreateNotebook =(notebook) => {\n//     return {\n//         type: CREATE_NOTEBOOK,\n//         notebook\n//     }\n// }\n\n// const actionGetNotebook =(notebooks) => {\n//     return {\n//         type: READ_NOTEBOOK,\n//         notebooks\n//     }\n// }\n\n// const actionUpdateNotebook =(notebook) => {\n//     return {\n//         type: UPDATE_NOTEBOOK,\n//         notebook\n//     }\n// }\n\n// const actionDeleteNotebook =(notebookId) => {\n//     return {\n//         type: DELETE_NOTEBOOK,\n//         notebookId\n//     }\n// }\n\n\n//todo thunks\n// in backend/routes/api/index.js prefixed with a path\n// export const thunkGetAllNotebooks = (user) => async (disptch) => {\n\n//     const response = await csrfFetch(`/api/notebooks/user/${userId}`)\n\n//     if (response.ok) {\n//         const data = await response.json();\n//         dispatch(actionGetNotebook(data));\n//         return response;\n//     } else {\n//         return await response.json()\n//     }\n// }\n\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n\n// export const login = (user) => async(disptch) => {\n//     const { credential, password } = user;\n//     const response = await csrfFetch('/api/session', {\n//         method: 'POST',\n//         body: JSON.stringify({\n//             credential,\n//             password\n//         }),\n//     });\n//     const data = await response.json();\n//     dispatch(setUser(data.user));\n//     return response;\n// }\n\n\n//todo reducer add it to the reducer in store/index.js and import\n\n//  const notebooks = (state = {}, action) => {\n//     let newState = {...state}\n//     switch (action.type) {\n//       case CREATE_NOTEBOOK:\n//         newState = Object.assign({}, state);\n//         newState.user = action.payload;\n//         return newState;\n\n//       case GET_NOTEBOOK:\n//         //normalization\n//        action.notebooks.forEach(notebook => {\n//             newState[notebook.id] = notebook\n//        })\n//         return newState;\n\n//       case UPDATE_NOTEBOOK:\n//         newState = Object.assign({}, state);\n//         newState.user = action.payload;\n//         return newState;\n\n//       case DELETE_NOTEBOOK:\n\n//         delete newState[action.notebookId]\n//         return newState;\n\n//       default:\n//         return state;\n//     }\n//   };\n\n//   export default notebooks\n\n\n// after full crud go back to the component and make it use redux\n\n// import { useDispatch, useSelector} from 'react-redux';\n\n// async function onDelete(notebookId) {\n//     console.log('BYE')\n// }\n\n// const dispatch = useDispatch;\n// const selectorNotebooks = useSelector(state => state.notebooks)\n\n// import thunkGetAllNotebooks from '../store/notebooks'\n// inside\n// useEffect(()=> {\n//     dispatch(thunkGetAllNotebooks(notebookId))\n// }, [dispatch])\n\n// useEffect(()=> {\n//     if (selectorNotebooks) {\n//     selectorNotebooks(Object.values(selectorNotebooks))\n// }\n// }, [selectorNotebooks])\n"],"mappings":"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AAC,GAAGoC,KAAJ;QAAW,CAACC,MAAM,CAAC9B,QAAP,CAAgB0B,EAAjB,GAAsB,EAAC,GAAGI,MAAM,CAAC9B;QAAX;MAAjC,CAAP;;IAEJ,KAAKN,SAAL;MACI,OAAO,EAAC,GAAGmC,KAAJ;QAAW,CAACC,MAAM,CAAC5B,IAAP,CAAYwB,EAAb,GAAkB,EAAC,GAAGI,MAAM,CAAC5B;QAAX;MAA7B,CAAP;;IAEJ,KAAKP,WAAL;MACI,OAAOoC,QAAQ,CAACD,MAAM,CAAC5B,IAAP,CAAYwB,EAAb,CAAf;MACA,OAAOK,QAAP;;IAEJ;MACI,OAAOF,KAAP;EAhBR;;EAiBC;AACF,CApBD;;AAuBA,eAAeD,WAAf,C,CAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}